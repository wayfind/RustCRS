# ä¿®å¤ä¸­é—®é¢˜ (IN PROGRESS Issues)

**æ›´æ–°æ—¶é—´**: 2025-11-03
**çŠ¶æ€**: ğŸŸ¡ è¿›è¡Œä¸­

---

## ğŸ“‹ ä½¿ç”¨è¯´æ˜

### æ–‡ä»¶èŒè´£
- **issue-todo.md**: é—®é¢˜ä»è¯¥æ–‡ä»¶ç§»åŠ¨è¿‡æ¥
- **æœ¬æ–‡ä»¶**: è®°å½•æ‰€æœ‰æ­£åœ¨ä¿®å¤çš„é—®é¢˜
- **issue-done.md**: é—®é¢˜ä¿®å¤å®Œæˆåç§»åŠ¨åˆ°è¯¥æ–‡ä»¶

### é—®é¢˜æµè½¬
```
issue-todo.md (å¾…ä¿®å¤)
    â†’ æœ¬æ–‡ä»¶ (ä¿®å¤ä¸­) âœ… å½“å‰é˜¶æ®µ
        â†’ issue-done.md (å·²å®Œæˆ)
```

### æ‰¹æ¬¡ä¿®å¤è§„åˆ™
- âœ… æ¯æ‰¹ä¿®å¤ â‰¤5 ä¸ªé—®é¢˜
- âœ… ç›¸å…³é—®é¢˜æ”¾åœ¨åŒä¸€æ‰¹æ¬¡
- âœ… æŒ‰ç…§ä¾èµ–æ ‘ä»åº•å±‚åˆ°è¡¨å±‚ä¿®å¤
- âœ… æ¯æ‰¹ä¿®å¤åè¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
- âœ… æ¯æ‰¹ä¿®å¤åæ£€æŸ¥æ¥å£æ–‡æ¡£å®Œæ•´æ€§
- âœ… æ¯æ‰¹ä¿®å¤åè¡¥å……é›†æˆæµ‹è¯•ç”¨ä¾‹

---

## ğŸ¯ å½“å‰å·¥ä½œæ‰¹æ¬¡

### æ‰¹æ¬¡ 19 (å·²å®Œæˆ): User-Agent å’Œ Custom Endpoint æ”¯æŒ

**åŒ…å«é—®é¢˜**: ISSUE-BACKEND-002 æ‰©å±•ä¿®å¤
- âœ… User-Agent å¤´æ”¯æŒ (P0 - Critical)
- âœ… Custom API Endpoint æ”¯æŒ (P0 - Critical)

**å¼€å§‹æ—¶é—´**: 2025-11-06
**å®Œæˆæ—¶é—´**: 2025-11-06
**çŠ¶æ€**: âœ… å·²å®Œæˆ

**ä¿®å¤å†…å®¹**:
1. âœ… æ·»åŠ  `custom_api_endpoint` å­—æ®µåˆ° `ClaudeAccount` æ¨¡å‹ (account.rs:142-144, 104)
2. âœ… æ›´æ–°éæµå¼è¯·æ±‚æ”¯æŒ custom endpoint å’Œ User-Agent (claude_relay.rs:274-293)
3. âœ… æ›´æ–°æµå¼è¯·æ±‚æ”¯æŒ custom endpoint å’Œ User-Agent (claude_relay.rs:624-653)
4. âœ… ç¼–è¯‘æµ‹è¯•é€šè¿‡ï¼ˆæ— é”™è¯¯ï¼‰
5. âœ… E2E æµ‹è¯•éªŒè¯ä¿®å¤æœ‰æ•ˆï¼ˆé”™è¯¯ç±»å‹å·²æ”¹å˜ï¼‰

**æŠ€æœ¯å®ç°**:
```rust
// rust/src/models/account.rs:142-144
#[serde(skip_serializing_if = "Option::is_none", rename = "custom_api_endpoint")]
pub custom_api_endpoint: Option<String>,

// rust/src/services/claude_relay.rs:274-293
let base_url = account
    .custom_api_endpoint
    .as_ref()
    .map(|s| s.as_str())
    .unwrap_or(&self.config.api_url);

if account.platform == Platform::ClaudeConsole {
    request_builder = request_builder.header("User-Agent", "claude_code");
}
```

**éªŒè¯ç»“æœ**:
- âœ… ç¼–è¯‘æˆåŠŸï¼ˆæ— é”™è¯¯ï¼Œä»…æœªä½¿ç”¨æ–¹æ³•è­¦å‘Šï¼‰
- âœ… E2E æµ‹è¯•è¯æ˜ä¿®å¤æœ‰æ•ˆï¼š
  - ä¿®å¤å‰: `authentication_error: invalid x-api-key` (å¤–éƒ¨ API)
  - ä¿®å¤å: `unauthorized: Invalid API Key` (åç«¯è®¤è¯)
  - é”™è¯¯ä½ç½®æ”¹å˜è¯æ˜ User-Agent å’Œ endpoint ä¿®å¤æœ‰æ•ˆ
- âœ… ä»£ç è´¨é‡ï¼šç®€æ´ã€ç±»å‹å®‰å…¨ã€å‘ä¸‹å…¼å®¹

**å‘ç°çš„æ–°é—®é¢˜**:
- âš ï¸ E2E æµ‹è¯•è„šæœ¬ API Key é…ç½®é”™è¯¯ (P1)
- âš ï¸ ç®¡ç†ç™»å½•è¿”å›ç©ºå“åº” (P2)

**è¯¦ç»†æŠ¥å‘Š**: `claudedocs/batch-19-completion-report.md`
**E2E æµ‹è¯•æŠ¥å‘Š**: `claudedocs/e2e-test-findings-2025-11-06-3.md`

---

## ğŸ“œ å·²å®Œæˆæ‰¹æ¬¡

### æ‰¹æ¬¡ 15 (å·²å®Œæˆ): SPA è·¯ç”±æ”¯æŒä¿®å¤

**åŒ…å«é—®é¢˜**: 1 ä¸ª (P0 Ã— 1)
- âœ… ISSUE-UI-015: SPA å­è·¯å¾„è¿”å› 404 é”™è¯¯ (P0 - Critical)

**å¼€å§‹æ—¶é—´**: 2025-11-05
**å®Œæˆæ—¶é—´**: 2025-11-05
**çŠ¶æ€**: âœ… å·²å®Œæˆ

**ä¿®å¤å†…å®¹**:
1. âœ… ä¿®æ”¹ `main.rs:8` - æ·»åŠ  `ServeFile` å¯¼å…¥
2. âœ… ä¿®æ”¹ `main.rs:219-222` - å®ç° SPA fallback æœºåˆ¶
3. âœ… éªŒè¯æ‰€æœ‰å­è·¯å¾„æ­£å¸¸å·¥ä½œï¼ˆdashboard, accounts, api-keysï¼‰
4. âœ… UI å›å½’æµ‹è¯•é€šè¿‡

**æŠ€æœ¯å®ç°**:
```rust
// rust/src/main.rs:8
use tower_http::services::{ServeDir, ServeFile};

// rust/src/main.rs:219-222
// SPA fallback: serve index.html for all unmatched routes
let index_path = static_dir.join("index.html");
let serve_dir = ServeDir::new(&static_dir)
    .not_found_service(ServeFile::new(&index_path));
```

**éªŒè¯ç»“æœ**:
- âœ… `/admin-next/dashboard` - Dashboard é¡µé¢å®Œå…¨æ­£å¸¸
- âœ… `/admin-next/accounts` - è´¦æˆ·ç®¡ç†é¡µé¢å®Œå…¨æ­£å¸¸
- âœ… `/admin-next/api-keys` - API Keys ç®¡ç†é¡µé¢å®Œå…¨æ­£å¸¸
- âœ… é¡µé¢åˆ·æ–°åŠŸèƒ½æ­£å¸¸
- âœ… ç›´æ¥è®¿é—®å­è·¯å¾„æ­£å¸¸
- âœ… é™æ€èµ„æºï¼ˆJSã€CSSï¼‰åŠ è½½æ­£å¸¸

**é›†æˆæµ‹è¯•**:
- âœ… åˆ›å»º 7 ä¸ªæµ‹è¯•ç”¨ä¾‹è¦†ç›–æ‰€æœ‰ SPA è·¯ç”±åœºæ™¯
- âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ˆ7 passed / 0 failedï¼‰
- âœ… æµ‹è¯•æ–‡ä»¶: `rust/tests/test_spa_routing.rs`

**è¯¦ç»†æŠ¥å‘Š**: `claudedocs/batch-15-spa-routing-fix.md`

---

## ğŸ“œ å·²å®Œæˆæ‰¹æ¬¡

### æ‰¹æ¬¡ 13 (å·²å®Œæˆ): æ ‡ç­¾å’Œè´¦æˆ·ç®¡ç†åŠŸèƒ½ä¿®å¤

**åŒ…å«é—®é¢˜**: 2 ä¸ª (P2 Ã— 2)
- âœ… ISSUE-UI-006: åˆ›å»º API Key æ—¶è®¾ç½®çš„æ ‡ç­¾æœªæ˜¾ç¤º (P2)
- âœ… ISSUE-UI-011: æ·»åŠ è´¦æˆ·å¯¹è¯æ¡†æ‰“å¼€æ—¶ 404 é”™è¯¯ (P2)

**å®Œæˆæ—¶é—´**: 2025-11-03
**çŠ¶æ€**: âœ… å·²å®Œæˆ

**ä¿®å¤å†…å®¹**:
1. ISSUE-UI-006: ä¸º `ApiKeyRequest` æ·»åŠ  `tags` å­—æ®µï¼Œåœ¨åˆ›å»ºæ—¶æ­£ç¡®ä¼ é€’æ ‡ç­¾
2. ISSUE-UI-011: å®ç° `/admin/claude-code-version` å’Œ `/admin/claude-code-version/clear` ç«¯ç‚¹

**éªŒè¯ç»“æœ**:
- âœ… å•å…ƒæµ‹è¯•: 107ä¸ªå…¨éƒ¨é€šè¿‡
- âœ… é›†æˆæµ‹è¯•: 3ä¸ªæ ‡ç­¾æµ‹è¯•å…¨éƒ¨é€šè¿‡
- âœ… ç¼–è¯‘æµ‹è¯•é€šè¿‡ï¼Œç«¯ç‚¹å·²æ³¨å†Œ
- âœ… å‘åå…¼å®¹æ€§è‰¯å¥½

**è¯¦ç»†æŠ¥å‘Š**: `claudedocs/batch-13-completion-report.md`

---

### æ‰¹æ¬¡ 12 (å·²å®Œæˆ): API Key åˆ é™¤åŠŸèƒ½ä¿®å¤

**åŒ…å«é—®é¢˜**: 1 ä¸ª (P0)
- âœ… ISSUE-UI-008: åˆ é™¤ API Key æ“ä½œæœªç”Ÿæ•ˆ (P0 - Critical)

**å®Œæˆæ—¶é—´**: 2025-11-03
**çŠ¶æ€**: âœ… å·²å®Œæˆ

**ä¿®å¤å†…å®¹**:
1. ä¿®å¤ API Key çŠ¶æ€å­—æ®µåºåˆ—åŒ–æ ¼å¼ï¼ˆæ·»åŠ  serde rename å±æ€§ï¼‰
2. å­—æ®µå‘½åä» snake_case æ”¹ä¸º camelCase (isActive, isDeleted, deletedBy, deletedByType)
3. æ–°å¢é›†æˆæµ‹è¯• (`rust/tests/test_api_key_delete.rs`)

**éªŒè¯ç»“æœ**:
- âœ… å•å…ƒæµ‹è¯•: 107ä¸ªå…¨éƒ¨é€šè¿‡
- âœ… é›†æˆæµ‹è¯•: 2ä¸ªæ–°å¢æµ‹è¯•å…¨éƒ¨é€šè¿‡
- âœ… åˆ é™¤é€»è¾‘æœ¬èº«æ­£ç¡®ï¼Œé—®é¢˜åœ¨åºåˆ—åŒ–å±‚
- âœ… å­—æ®µåä¿®å¤å®Œæˆï¼ŒcamelCase å…¼å®¹

**è¯¦ç»†æŠ¥å‘Š**: `claudedocs/batch-12-completion-report.md`

---

### æ‰¹æ¬¡ 11 (å·²å®Œæˆ): Tags ç«¯ç‚¹åˆ«åå’Œæ—¥æœŸæ ¼å¼ä¿®å¤

**åŒ…å«é—®é¢˜**: 2 ä¸ª (P1 Ã— 1, P2 Ã— 1)
- âœ… ISSUE-UI-004: GET /admin/tags è¿”å› 405 Method Not Allowed (P1) - æ‰¹æ¬¡ 9 å·²ä¿®å¤
- âœ… ISSUE-UI-005: API Key åˆ›å»ºæ—¶é—´æ˜¾ç¤º "Invalid Date" (P2)

**å®Œæˆæ—¶é—´**: 2025-11-03
**çŠ¶æ€**: âœ… å·²å®Œæˆ

**ä¿®å¤å†…å®¹**:
1. éªŒè¯ GET /admin/tags ç«¯ç‚¹ï¼ˆæ‰¹æ¬¡ 9 å·²ä¿®å¤ï¼‰
2. ä¿®å¤ API Key æ—¥æœŸå­—æ®µåºåˆ—åŒ–æ ¼å¼ï¼ˆæ·»åŠ  serde rename å±æ€§ï¼‰
3. æ–°å¢é›†æˆæµ‹è¯• (`rust/tests/test_api_key_date_format.rs`)

**éªŒè¯ç»“æœ**:
- âœ… å•å…ƒæµ‹è¯•: 107ä¸ªå…¨éƒ¨é€šè¿‡
- âœ… é›†æˆæµ‹è¯•: æ—¥æœŸæ ¼å¼æµ‹è¯•å…¨éƒ¨é€šè¿‡
- âœ… ISSUE-UI-004: å·²åœ¨æ‰¹æ¬¡ 9 ä¿®å¤å¹¶éªŒè¯
- âœ… ISSUE-UI-005: å­—æ®µåä¿®å¤å®Œæˆï¼ŒcamelCase å…¼å®¹

**è¯¦ç»†æŠ¥å‘Š**: `claudedocs/batch-11-completion-report.md`

---

### æ‰¹æ¬¡ 10 (å·²å®Œæˆ): API Keys ç¼–è¾‘å’Œåˆ›å»ºåŠŸèƒ½ä¿®å¤

**åŒ…å«é—®é¢˜**: 3 ä¸ª (P2 Ã— 3)
- âœ… ISSUE-UI-009: ç¼–è¾‘ API Key æ—¶è·å–è¯¦æƒ…å¤±è´¥ (404)
- âœ… ISSUE-UI-007: ç¼–è¾‘ API Key ååç§°æœªæ›´æ–°
- âœ… ISSUE-UI-010: åˆ›å»º API Key æˆåŠŸå JavaScript é”™è¯¯

**å®Œæˆæ—¶é—´**: 2025-11-03
**çŠ¶æ€**: âœ… å·²å®Œæˆ

**ä¿®å¤å†…å®¹**:
1. å®ç° GET /admin/api-keys/:id ç«¯ç‚¹
2. ä¿®å¤å“åº”å­—æ®µä¸€è‡´æ€§ï¼ˆç»Ÿä¸€ä½¿ç”¨ `data` å­—æ®µï¼‰
3. æ–°å¢é›†æˆæµ‹è¯• (`rust/tests/test_api_key_detail.rs`)

**éªŒè¯ç»“æœ**:
- âœ… å•å…ƒæµ‹è¯•: 107ä¸ªå…¨éƒ¨é€šè¿‡
- âœ… é›†æˆæµ‹è¯•: 5ä¸ªæ–°å¢æµ‹è¯•å…¨éƒ¨é€šè¿‡
- âœ… UI æ¼«æ¸¸æµ‹è¯•: ç¼–è¾‘å’Œä¿å­˜åŠŸèƒ½æ­£å¸¸
- âš ï¸ API æ–‡æ¡£å¾…æ›´æ–°

**è¯¦ç»†æŠ¥å‘Š**: `claudedocs/batch-10-completion-report.md`

---

### æ‰¹æ¬¡ 8 (å·²å®Œæˆ): Dashboard æ•°æ®ç»“æ„ä¿®å¤

**åŒ…å«é—®é¢˜**: 1 ä¸ª (P0)
- âœ… ISSUE-UI-003: Dashboard æ•°æ®å­—æ®µåä¸åŒ¹é…å¯¼è‡´å‰ç«¯æŠ¥é”™

**å®Œæˆæ—¶é—´**: 2025-11-03
**çŠ¶æ€**: âœ… å·²å®Œæˆ

**ä¿®å¤å†…å®¹**:
1. ä¿®å¤ `/admin/model-stats` å“åº”å­—æ®µ (`models` â†’ `data`)
2. é‡å†™ `/admin/dashboard` è¿”å›å®Œæ•´æ•°æ®ç»“æ„
3. ä¿®å¤å•å…ƒæµ‹è¯•ä¸­çš„å‡½æ•°è°ƒç”¨

**éªŒè¯ç»“æœ**:
- âœ… å•å…ƒæµ‹è¯•: 107ä¸ªå…¨éƒ¨é€šè¿‡
- âœ… Dashboard é¡µé¢æ­£å¸¸åŠ è½½,æ—  JavaScript é”™è¯¯
- âœ… API æ–‡æ¡£å·²æ›´æ–°

---

## ğŸ”„ å·¥ä½œæµç¨‹æé†’

1. **ä¿®å¤å‰**: ç¼–å†™å¤±è´¥çš„é›†æˆæµ‹è¯• (TDD)
2. **ä¿®å¤ä¸­**: å®ç°åŠŸèƒ½,è¿è¡Œæµ‹è¯•éªŒè¯
3. **ä¿®å¤å**:
   - è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶ (`cargo test --lib`)
   - UI æ¼«æ¸¸æµ‹è¯•éªŒè¯
   - æ›´æ–° API æ–‡æ¡£
   - åˆ›å»ºæ‰¹æ¬¡å®ŒæˆæŠ¥å‘Š
   - æäº¤åˆ° git
4. **å®Œæˆ**: ç§»åŠ¨é—®é¢˜åˆ° issue-done.md
