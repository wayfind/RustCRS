# CLAUDE.md 修订总结

**修订时间**: 2025-11-02
**修订原因**: 明确项目是后端重构项目，定义基于 UI 漫游测试的开发工作流程

---

## 📝 主要变更

### 1. 项目定位明确化

**之前**: "正在从 Node.js 迁移到 Rust（进行中）"
**现在**: "**后端重构项目** - 从 Node.js 迁移到 Rust（进行中）"

**新增关键特点**:
- ✅ **前端稳定**: Vue 3 前端已完成，功能正常，无需修改
- 🎯 **后端重构**: Rust 后端正在重构，替换原 Node.js 实现
- 🧪 **测试驱动**: 基于浏览器 UI 漫游测试发现并修复后端问题

### 2. 新增"开发工作流程"章节 (🎯)

完整定义了六步工作流程：

```
UI 漫游测试 → 问题记录 → 批次修复 → 接口验证 → 测试补充 → 回归验证
```

**核心规则**:
- 每批修复 ≤5 个问题
- 必须记录到 `claudedocs/issue.md`
- 每批修复后检查接口文档
- 必须补充集成测试用例

### 3. 问题追踪规范

**新增**:
- 问题记录必填字段定义
- 优先级分类（P0/P1/P2/P3）
- 批次修复原则和策略
- 问题追踪文件规范

### 4. 后端开发指南强化 (🛠️)

**新增专门章节**:
- 后端开发原则（前端稳定，不要修改）
- 接口兼容性要求
- 标准 Bug 修复流程（TDD 方法）
- 集成测试补充要求

### 5. 前端说明章节调整

**标题变更**: "前端开发（Vue 3）" → "前端说明（仅供参考）"

**新增重要提示**: "前端是稳定的，一般情况下不需要修改。以下信息仅供理解前端行为。"

**新增内容**:
- 前端页面与后端接口对应表
- 调试前端问题的标准流程

### 6. 目录结构更新

**新增 `claudedocs/` 目录说明**:
```
claudedocs/                     📋 项目工作文档
  issue.md        - 问题追踪（必须维护）
  *.md            - 其他技术分析和记录
```

### 7. 故障排除章节扩展

**新增**: "UI 漫游测试发现问题" 子章节
- 标准处理流程（记录→分类→批次→跟踪）
- 常见问题类型分类

### 8. 文档导航优化

**新增"工作文档"部分**:
- `claudedocs/issue.md`（核心工作文件）
- `claudedocs/*.md`（技术分析）

---

## 📄 新建文件

### claudedocs/issue.md

**用途**: 项目问题追踪的核心文件

**主要内容**:
1. 工作流程说明
2. 问题记录规范（必填字段、模板）
3. 批次修复规则
4. 待修复问题列表
5. 进行中问题跟踪
6. 已修复问题记录
7. 统计信息
8. 常见问题分类

**关键特性**:
- 提供完整的问题记录模板
- 明确优先级和状态定义
- 支持批次管理
- 包含统计和进度跟踪

---

## 🎯 修订目标达成情况

### ✅ 已达成

1. **明确项目性质**: 清晰标识这是"后端重构项目"
2. **强调前端稳定**: 多处强调前端不需要修改
3. **定义工作流程**: 完整的六步工作流程
4. **规范问题追踪**: 详细的问题记录和管理规范
5. **批次修复机制**: 明确每批 ≤5 个问题的规则
6. **接口文档同步**: 强调接口文档检查的重要性
7. **测试补充要求**: 每批修复后必须补充集成测试

### 📊 文档结构优化

**章节组织**:
1. 项目概述（包含新的关键特点）
2. 🎯 开发工作流程（新增核心章节）
3. 快速启动命令
4. 架构说明
5. 🛠️ 后端开发指南（强化）
6. 前端说明（仅供参考）
7. 关键约束
8. 常见工作流程
9. 故障排除（扩展）
10. 文档导航（优化）
11. 重要文件参考

---

## 🔍 关键改进点

### 1. 清晰的职责划分

**前端**:
- ✅ 稳定可用
- ⚠️ 不需要修改
- 📚 文档仅供参考

**后端**:
- 🎯 重构中
- 🔧 所有问题源于此
- 📝 必须维护测试和文档

### 2. 系统化的工作方法

**之前**: 没有明确的问题发现和修复流程
**现在**: 六步工作流程 + 批次管理 + 问题追踪

### 3. 质量保证机制

**新增要求**:
- 问题必须记录
- 修复必须有测试
- 接口必须有文档
- 每批必须回归验证

### 4. 可追溯性

**通过以下机制实现**:
- `claudedocs/issue.md` 记录所有问题
- 集成测试覆盖修复
- 接口文档同步更新
- Git 提交关联问题 ID

---

## 📚 使用建议

### 对于 Claude Code

1. **任务开始前**: 阅读"开发工作流程"章节
2. **发现问题时**: 立即记录到 `claudedocs/issue.md`
3. **开始修复前**: 查看"后端开发指南"和"批次修复原则"
4. **修复完成后**: 按照标准流程验证和更新文档

### 对于开发者

1. **首次接触项目**: 从"项目概述"开始，理解项目性质
2. **日常开发**: 遵循"开发工作流程"的六步流程
3. **问题追踪**: 使用 `issue.md` 模板记录和管理问题
4. **质量保证**: 每批修复后完成全套验证流程

---

## ✅ 验证清单

- [x] CLAUDE.md 已更新，包含所有新增内容
- [x] claudedocs/issue.md 已创建，包含完整模板
- [x] 所有引用的文档文件已验证存在
- [x] 工作流程清晰且可执行
- [x] 问题追踪规范明确且完整
- [x] 批次修复规则清晰且合理

---

## 🚀 下一步行动

1. **开始 UI 漫游测试**: 访问 http://localhost:8080/admin-next
2. **记录发现的问题**: 使用 `issue.md` 模板
3. **组织首个批次**: 选择 ≤5 个高优先级问题
4. **按流程修复**: 遵循六步工作流程
5. **持续迭代**: 重复工作流程直到后端重构完成

---

**文档维护**: 随着项目进展，CLAUDE.md 和 issue.md 应该持续更新以反映最新的工作流程和项目状态。
