# Claudedocs - 项目工作文档

**最后更新**: 2025-11-02

---

## 📁 目录结构

```
claudedocs/
├─ README.md                        # 本文件 - 目录导航
├─ issue-system-guide.md            # Issue 系统完整使用指南 ⭐
│
├─ issue-todo.md                    # 📋 待解决问题
├─ issue-doing.md                   # 🟡 修复中问题
├─ issue-done.md                    # ✅ 已完成问题
│
├─ claude-md-revision-summary.md    # CLAUDE.md 修订说明
└─ [其他技术分析文档]
```

---

## 🎯 快速开始

### 第一次使用？

1. **阅读项目概述**: 打开 `../CLAUDE.md` 了解项目背景
2. **学习 Issue 系统**: 阅读 `issue-system-guide.md` 了解完整工作流程
3. **开始UI测试**: 运行 `make rust-dev`，访问 http://localhost:8080/admin-next
4. **记录问题**: 使用 `issue-todo.md` 的模板记录发现的问题

### 日常工作流程

```
1. UI 漫游测试 → 发现问题
2. issue-todo.md → 记录问题（含根因分析）
3. issue-todo.md → 选择批次（≤5个问题）
4. issue-doing.md → 跟踪修复进度
5. issue-done.md → 归档已完成问题
```

---

## 📄 文件说明

### Issue 追踪系统 (核心)

#### issue-todo.md 📋
**用途**: 记录所有待解决的问题

**包含**:
- 🌳 依赖树可视化
- 🔴 待修复问题（可立即修复）
- ⏸️ 暂缓问题（依赖未解决）
- 📊 统计信息
- 📝 问题记录模板

**何时使用**:
- 发现新问题时立即记录
- 选择批次开始修复
- 检查暂缓问题的依赖状态

---

#### issue-doing.md 🟡
**用途**: 跟踪当前正在修复的问题

**包含**:
- 🎯 当前批次信息
- 🟡 进行中问题（≤5个）
- 📈 修复进度跟踪
- ✅ 批次完成检查清单

**何时使用**:
- 开始修复批次
- 每日更新修复进度
- 完成问题修复

---

#### issue-done.md ✅
**用途**: 归档已完成问题，积累知识库

**包含**:
- 📦 已完成批次记录
- ✅ 已修复问题详情
- 🔧 修复方案和技术细节
- 📚 经验总结和最佳实践
- 📊 根因分析统计

**何时使用**:
- 问题修复完成后归档
- 查找类似问题的解决方案
- 学习修复模式和最佳实践

---

#### issue-system-guide.md ⭐
**用途**: Issue 系统完整使用指南

**包含**:
- 📁 三文件系统架构
- 🔄 问题生命周期
- 🔑 核心特性（根因分析、依赖树、批次管理）
- 📖 详细操作指南（6个核心操作）
- 🎯 最佳实践
- ❓ 常见问题 FAQ

**何时使用**:
- 初次使用系统时完整阅读
- 遇到操作疑问时查阅
- 培训新成员

---

### 其他文档

#### claude-md-revision-summary.md
**用途**: 记录 CLAUDE.md 的修订历史和设计思路

**包含**:
- 主要变更说明
- 新增章节解释
- 修订目标达成情况

---

## 🔑 核心概念

### 根因分析

**追问 5 次"为什么"找到根本原因**:
```
问题: 账户列表加载慢
为什么 1: Redis 查询慢
为什么 2: 连接数不足
为什么 3: 连接未正确释放
为什么 4: 错误处理路径缺少释放逻辑
为什么 5: 未使用 Rust RAII 模式 ← 根本原因
```

**根因类型**:
- 🏗️ 架构设计问题
- 🔧 实现错误
- 📊 数据结构问题
- 🔌 接口不一致
- ⚡ 性能瓶颈
- 🔒 安全漏洞
- 📚 缺失功能

### 依赖树管理

**识别问题之间的依赖关系**:
```
ISSUE-010 (底层问题) 🔴 待修复
  ├─ 阻塞 → ISSUE-001 ⏸️ 暂缓
  ├─ 阻塞 → ISSUE-005 ⏸️ 暂缓
  └─ 阻塞 → ISSUE-008 ⏸️ 暂缓

修复 ISSUE-010 后 → 自动解除 3 个问题的阻塞
```

### 批次修复策略

**每批 ≤5 个问题**:
- ✅ 优先底层问题（阻塞数多）
- ✅ 相关问题同批
- ✅ 按依赖树从底层到表层
- ✅ 完成一批开始下一批

---

## 🚀 典型工作场景

### 场景 1: 发现新问题

```bash
# 1. UI 漫游测试
make rust-dev
# 浏览器访问 http://localhost:8080/admin-next
# 测试各项功能，发现问题

# 2. 记录问题
vim claudedocs/issue-todo.md
# 复制问题模板，填写信息

# 3. 根因分析
# 追问 5 次"为什么"
# 识别依赖关系
# 确定状态: 🔴 待修复 或 ⏸️ 暂缓

# 4. 更新依赖树和统计
```

### 场景 2: 开始修复批次

```bash
# 1. 打开 issue-todo.md，选择批次
# 优先选择底层问题（阻塞数多）
# 确认 ≤5 个问题，无未解决依赖

# 2. 移动到 issue-doing.md
# 复制问题完整信息
# 添加修复进度清单
# 从 issue-todo.md 删除

# 3. 开始修复第一个问题
cd rust/
cargo test test_name  # 先写失败的测试
# 修复代码
cargo test test_name  # 验证测试通过
```

### 场景 3: 完成问题修复

```bash
# 1. 确认所有检查项完成
cargo test --lib
bash rust/run-integration-tests.sh
# UI 回归测试

# 2. 移动到 issue-done.md
# 复制问题 + 添加修复方案
# 从 issue-doing.md 删除

# 3. 检查被阻塞的问题
# 打开 issue-todo.md
# 将被阻塞问题从"暂缓"移至"待修复"
# 更新依赖树

# 4. 继续下一个问题或下一批次
```

---

## 📊 统计和指标

### 追踪的关键指标

**issue-todo.md**:
- 待修复问题数
- 暂缓问题数
- 底层问题数（优先级）
- 阻塞影响最大的问题

**issue-doing.md**:
- 当前批次进度 (%)
- 预计完成时间
- 遇到的阻塞

**issue-done.md**:
- 总完成问题数
- 按根因类型分布
- 平均修复时间
- 常见问题模式

---

## 🎓 学习资源

### 新手入门顺序

1. **项目背景** → `../CLAUDE.md` (15分钟)
2. **Issue 系统** → `issue-system-guide.md` (30分钟)
3. **实践操作** → UI 测试 + 记录一个问题 (1小时)
4. **参考示例** → `issue-done.md` 中的已完成问题 (30分钟)

### 进阶学习

- 深入理解根因分析方法
- 学习依赖树管理技巧
- 研究典型修复模式
- 总结个人经验教训

---

## ❓ 常见问题

### Q: 三个文件如何保持同步？

**A**: 使用检查清单:
- 移动问题时同时更新源文件和目标文件
- 每次更新后检查统计信息
- 解除阻塞时更新依赖树
- Git 提交包含所有相关文件

### Q: 如何判断问题是否需要暂缓？

**A**:
- 依赖其他**未解决**问题 → 暂缓
- 依赖**新特性**开发 → 暂缓
- **独立**可修复 → 不暂缓
- 依赖已完成 → 不暂缓

### Q: 批次中途发现新依赖怎么办？

**A**:
1. 停止修复当前问题
2. 记录新依赖
3. 将问题标记 ⏸️ 暂缓
4. 移回 issue-todo.md
5. 继续批次中其他问题

更多 FAQ 请查看 `issue-system-guide.md` 📖

---

## 🔗 相关文档

### 项目文档
- **CLAUDE.md**: 项目工作流程和开发指南
- **docs/guides/api-reference.md**: 接口文档
- **docs/architecture/testing.md**: 测试指南
- **docs/guides/quickstart.md**: 快速开始

### 代码资源
- **rust/src/**: Rust 后端代码
- **rust/tests/**: 集成测试示例
- **web/admin-spa/**: Vue 3 前端代码

---

## 📞 获取帮助

### 遇到问题？

1. **查阅本文档**: 大多数问题在 `issue-system-guide.md` 中有答案
2. **参考示例**: `issue-done.md` 中有大量实际案例
3. **检查 CLAUDE.md**: 了解整体工作流程
4. **查看 Git 历史**: 学习其他人如何处理类似问题

---

**维护说明**:
- 添加新文档时更新本 README
- 定期检查链接有效性
- 保持文档结构清晰
- 及时更新统计信息
